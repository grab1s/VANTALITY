local v0=(getgenv and getgenv()) or _G ;if (v0.ExecutorChinaHat and (typeof(v0.ExecutorChinaHat.Stop)=="function")) then local v57=0 -0 ;while true do if (v57==(0 + 0)) then v0.ExecutorChinaHat:Stop();task.wait(997.1 -(915 + 82) );break;end end end v0.ExecutorChinaHat={};local v2=v0.ExecutorChinaHat;local v3=game:GetService("Players");v2.Settings={Color=Color3.fromRGB(722 -467 ,255,149 + 106 ),Radius=2 -0 ,Height=0.8,Transparency=0};v2.BeamSettings={BeamWidthStart=1187.05 -(1069 + 118) ,BeamWidthEnd=0.02,NumberOfBeams=1588 -888 };v2.State={isEnabled=false,currentMode="Beam",activeHatObjects=nil,charAddedConn=nil,charRemovingConn=nil};v2.UpdateSetting=function(v17,v18,v19) local v20=(v18=="Radius") or (v18=="Height") ;if (v17.Settings[v18]~=nil) then v17.Settings[v18]=v19;elseif (v17.BeamSettings[v18]~=nil) then v17.BeamSettings[v18]=v19;v20=true;else warn("[ChinaHat] Attempted to update a non-existent setting:",v18);return;end if (v17.State.isEnabled and v17.State.activeHatObjects) then if (v20 and v3.LocalPlayer.Character) then v17:CreateHatOnCharacter(v3.LocalPlayer.Character);else v17:_ApplyVisualSettings();end end end;v2.SetHatMode=function(v21,v22) local v23=0 -0 ;while true do if (v23==(1 + 0)) then v21.State.currentMode=v22;if (v21.State.isEnabled and v3.LocalPlayer and v3.LocalPlayer.Character) then v21:CreateHatOnCharacter(v3.LocalPlayer.Character);end break;end if (v23==(0 -0)) then if ((v22~="Beam") and (v22~="Cone")) then warn("[ChinaHat] Invalid hat mode:",v22,". Use 'Beam' or 'Cone'.");return;end if (v21.State.currentMode==v22) then return;end v23=1;end end end;v2._ApplyVisualSettings=function(v24) local v25=0;while true do if (v25==(0 + 0)) then if  not v24.State.activeHatObjects then return;end if (v24.State.currentMode=="Beam") then for v108,v109 in ipairs(v24.State.activeHatObjects.Beams) do local v110=0;while true do if (v110==(791 -(368 + 423))) then v109.Color=ColorSequence.new(v24.Settings.Color);v109.Transparency=NumberSequence.new({NumberSequenceKeypoint.new(0,v24.Settings.Transparency),NumberSequenceKeypoint.new(3 -2 ,v24.Settings.Transparency * (444 -(416 + 26)) )});break;end end end elseif (v24.State.currentMode=="Cone") then local v111=0 -0 ;local v112;while true do if (v111==(0 + 0)) then v112=v24.State.activeHatObjects.Adornment;if v112 then local v117=0 -0 ;while true do if (v117==0) then v112.Color3=v24.Settings.Color;v112.Transparency=v24.Settings.Transparency;break;end end end break;end end end break;end end end;v2._CreateBeamHat=function(v26,v27,v28) local v29={AnchorPart=v28,Beams={},Attachments={}};local v30=Instance.new("Attachment");v30.Position=Vector3.new(438 -(145 + 293) ,v26.Settings.Height,430 -(44 + 386) );v30.Parent=v28;table.insert(v29.Attachments,v30);for v58=1487 -(998 + 488) ,v26.BeamSettings.NumberOfBeams do local v59=0 + 0 ;local v60;local v61;local v62;local v63;local v64;while true do if (v59==(2 + 0)) then table.insert(v29.Attachments,v63);v64=Instance.new("Beam");v64.Attachment0=v30;v59=775 -(201 + 571) ;end if (v59==5) then table.insert(v29.Beams,v64);break;end if (v59==(1142 -(116 + 1022))) then v64.Width1=v26.BeamSettings.BeamWidthEnd;v64.Segments=2;v64.Parent=v28;v59=20 -15 ;end if (v59==(0 + 0)) then v60=(v58/v26.BeamSettings.NumberOfBeams) * (7 -5) * math.pi ;v61=v26.Settings.Radius * math.cos(v60) ;v62=v26.Settings.Radius * math.sin(v60) ;v59=3 -2 ;end if (v59==(862 -(814 + 45))) then v64.Attachment1=v63;v64.FaceCamera=true;v64.Width0=v26.BeamSettings.BeamWidthStart;v59=4;end if (v59==(2 -1)) then v63=Instance.new("Attachment");v63.Position=Vector3.new(v61,0 + 0 ,v62);v63.Parent=v28;v59=1 + 1 ;end end end return v29;end;v2._CreateConeHat=function(v33,v34,v35) local v36=885 -(261 + 624) ;local v37;local v38;while true do if (v36==(1 -0)) then v38.Adornee=v35;v38.Radius=v33.Settings.Radius;v36=1082 -(1020 + 60) ;end if (v36==(1427 -(630 + 793))) then return v37;end if ((9 -6)==v36) then v38.Parent=v35;v37.Adornment=v38;v36=4;end if (v36==(9 -7)) then v38.Height=v33.Settings.Height;v38.CFrame=CFrame.Angles(math.rad(36 + 54 ),0 -0 ,0);v36=1750 -(760 + 987) ;end if (v36==0) then v37={AnchorPart=v35};v38=Instance.new("ConeHandleAdornment");v36=1914 -(1789 + 124) ;end end end;v2.CreateHatOnCharacter=function(v39,v40) local v41=766 -(745 + 21) ;local v42;local v43;local v44;local v45;while true do if (v41==(2 + 2)) then v43.CFrame=v42.CFrame * CFrame.new(0 -0 ,0.5,0 -0 ) ;v43.Parent=workspace.CurrentCamera;v45=nil;if (v39.State.currentMode=="Beam") then v45=v39:_CreateBeamHat(v42,v43);elseif (v39.State.currentMode=="Cone") then v45=v39:_CreateConeHat(v42,v43);end v41=1 + 4 ;end if (v41==(2 + 0)) then v43.Anchored=false;v43.CanCollide=false;v43.Transparency=1056 -(87 + 968) ;v43.Massless=true;v41=3;end if (v41==(13 -10)) then v44=Instance.new("WeldConstraint");v44.Part0=v42;v44.Part1=v43;v44.Parent=v43;v41=4 + 0 ;end if (v41==(0 -0)) then if  not v40 then return;end v39:DestroyHat();v42=v40:FindFirstChild("Head");if  not v42 then return;end v41=1414 -(447 + 966) ;end if (v41==5) then if v45 then v45.Weld=v44;v39.State.activeHatObjects=v45;v39:_ApplyVisualSettings();end break;end if (v41==(2 -1)) then if  not v42.Parent then v42.AncestryChanged:Wait();end v43=Instance.new("Part");v43.Name="ChinaHatAnchor";v43.Size=Vector3.new(1817.1 -(1703 + 114) ,701.1 -(376 + 325) ,0.1 -0 );v41=2;end end end;v2.DestroyHat=function(v46) local v47=0 -0 ;while true do if (v47==(0 + 0)) then if (v46.State.activeHatObjects and v46.State.activeHatObjects.AnchorPart) then if v46.State.activeHatObjects.AnchorPart.Parent then v46.State.activeHatObjects.AnchorPart:Destroy();end end v46.State.activeHatObjects=nil;break;end end end;v2.Enable=function(v48) if v48.State.isEnabled then return;end v48.State.isEnabled=true;local v50=v3.LocalPlayer;if  not v50 then return;end local function v51(v65) task.wait(0.2);if (v48.State.isEnabled and v65 and v65.Parent) then v48:CreateHatOnCharacter(v65);end end v48.State.charAddedConn=v50.CharacterAdded:Connect(v51);v48.State.charRemovingConn=v50.CharacterRemoving:Connect(function(v66) if (v48.State.activeHatObjects and v48.State.activeHatObjects.Weld and (v48.State.activeHatObjects.Weld.Part0.Parent==v66)) then v48:DestroyHat();end end);if v50.Character then v51(v50.Character);end end;v2.Disable=function(v54) local v55=0;while true do if (v55==(2 -1)) then if v54.State.charAddedConn then local v106=14 -(9 + 5) ;while true do if (v106==(376 -(85 + 291))) then v54.State.charAddedConn:Disconnect();v54.State.charAddedConn=nil;break;end end end if v54.State.charRemovingConn then v54.State.charRemovingConn:Disconnect();v54.State.charRemovingConn=nil;end v55=1267 -(243 + 1022) ;end if (v55==(7 -5)) then v54:DestroyHat();break;end if (v55==(0 + 0)) then if  not v54.State.isEnabled then return;end v54.State.isEnabled=false;v55=1;end end end;v2.Stop=function(v56) v56:Disable();if (v0.ExecutorChinaHat==v56) then v0.ExecutorChinaHat=nil;end end;return v2;
