local v0=(getgenv and getgenv()) or _G ;local v1=game:GetService("Players");local v2=game:GetService("Workspace");local v3=game:GetService("RunService");local v4=game:GetService("UserInputService");local v5=v1.LocalPlayer;if  not game:IsLoaded() then game.Loaded:Wait();end task.wait(0.5 + 0 );if (v0.ExecutorKillStreakEffect_Instance and (typeof(v0.ExecutorKillStreakEffect_Instance.Destroy)=="function")) then local v56=0 -0 ;while true do if (v56==0) then pcall(v0.ExecutorKillStreakEffect_Instance.Destroy);task.wait(0.1 + 0 );break;end end end v0.ExecutorKillStreakEffect_Instance=nil;v0.ExecutorKillStreakEffect=v0.ExecutorKillStreakEffect or {} ;local v8=v0.ExecutorKillStreakEffect;local v9="ExecutorKillStreakEffect_Adapted_v5";v8.Settings=v8.Settings or {DisplayText="2"} ;local v11=v8.Settings;v8.State=v8.State or {isEnabled=false,isInitialized=false,isWindowFocused=true,connections={},billboard=nil,clonedFrame=nil,character=nil,originalKillstreakFrame=nil,originalGameBillboardGui=nil,originalBillboardMonitorConn=nil} ;local v13=v8.State;local v14=0.1 -0 ;local v15=10;local v16=false;local function v17(v28) if v16 then end end local function v18(v29) end local function v19() v17("Cleanup_Internal START");if (v13.originalBillboardMonitorConn and v13.originalBillboardMonitorConn.Connected) then local v66=0 -0 ;while true do if (v66==(859 -(814 + 45))) then v13.originalBillboardMonitorConn:Disconnect();v17("Мониторинг оригинального BillboardGui отключен.");break;end end end v13.originalBillboardMonitorConn=nil;for v57,v58 in pairs(v13.connections) do if (v58 and v58.Connected) then v58:Disconnect();end v13.connections[v57]=nil;end v17("Пользовательские события отключены.");if (v13.billboard and v13.billboard.Parent) then v13.billboard:Destroy();v17("Наш BillboardGui удален.");end v13.billboard=nil;v13.clonedFrame=nil;if (v13.originalGameBillboardGui and v13.originalGameBillboardGui.Parent) then local v67=0 -0 ;while true do if (v67==(0 + 0)) then v17("Попытка включить оригинальный игровой BillboardGui...");pcall(function() v13.originalGameBillboardGui.Enabled=true;end);break;end end end v13.character=nil;v17("Cleanup_Internal END");end local function v20() local v34=0;local v35;while true do if (v34==(1 + 0)) then v35=pcall(function() local v91=0;local v92;local v93;local v94;while true do if (v91==(887 -(261 + 624))) then v13.originalGameBillboardGui=v93:FindFirstChild("BillboardGui");if ( not v13.originalKillstreakFrame or  not v13.originalKillstreakFrame:IsA("Frame")) then error("Не найден оригинальный Frame.");end v91=3;end if (v91==0) then v92=v2:WaitForChild("Cutscenes",v15);v93=v92:WaitForChild("Billboard",v15);v91=1 -0 ;end if (v91==3) then v17("Найден оригинальный Frame: "   .. v13.originalKillstreakFrame:GetFullName() );if (v13.originalGameBillboardGui and v13.originalGameBillboardGui:IsA("BillboardGui")) then v17("Найден оригинальный игровой BillboardGui: "   .. v13.originalGameBillboardGui:GetFullName() );else v17("Оригинальный игровой BillboardGui не найден (не критично, но не сможем отключить).");v13.originalGameBillboardGui=nil;end break;end if (v91==(1081 -(1020 + 60))) then v94=v93:WaitForChild("Killstreak",v15);v13.originalKillstreakFrame=v94:WaitForChild("Frame",v15);v91=1425 -(630 + 793) ;end end end);if  not v35 then local v105=0;while true do if (v105==(0 -0)) then v18("Ошибка при поиске оригинальных UI элементов.");v13.originalKillstreakFrame=nil;v105=4 -3 ;end if (v105==1) then v13.originalGameBillboardGui=nil;return false;end end end v34=1 + 1 ;end if (v34==(6 -4)) then return true;end if (v34==0) then if (v13.originalKillstreakFrame and v13.originalGameBillboardGui) then local v106=1747 -(760 + 987) ;while true do if (v106==(1913 -(1789 + 124))) then v17("Оригинальные элементы уже найдены.");return true;end end end v17("Поиск оригинальных UI элементов...");v34=767 -(745 + 21) ;end end end local function v21(v36) local v37=0 + 0 ;while true do if (v37==(2 -1)) then if (v36:IsA("ParticleEmitter") or v36:IsA("Beam") or v36:IsA("Trail") or v36:IsA("Light")) then v36.Enabled=true;end for v95,v96 in ipairs(v36:GetChildren()) do v21(v96);end break;end if (0==v37) then if  not v36 then return;end if v36:IsA("GuiObject") then v36.Visible=true;end v37=3 -2 ;end end end local function v22() if v13.isInitialized then return true;end if  not v5 then v18("LocalPlayer не найден.");return false;end local v38=v5:FindFirstChild("PlayerGui");if  not v38 then local v68=0 + 0 ;while true do if (v68==(0 + 0)) then v18("PlayerGui не найден.");return false;end end end v17("Initialize_Internal START");if  not v20() then v18("Не удалось найти оригинальные элементы для инициализации.");return false;end local v39,v40=pcall(function() local v60=1055 -(87 + 968) ;local v61;local v62;local v63;local v64;while true do if (v60==1) then v61.Enabled=false;v61.ResetOnSpawn=false;v62=v13.originalKillstreakFrame:FindFirstAncestorWhichIsA("BillboardGui");if v62 then local v120=0 -0 ;while true do if (v120==(0 + 0)) then v61.Size=v62.Size;v61.StudsOffset=v62.StudsOffset + (Vector3.yAxis * v14) ;break;end end else v61.Size=UDim2.new(4,0 -0 ,2,1413 -(447 + 966) );v61.StudsOffset=Vector3.new(0,v14,0 -0 );end v60=2;end if (v60==(1819 -(1703 + 114))) then v63=v13.originalKillstreakFrame:Clone();v63.Name=v9   .. "_FrameClone" ;v64=v63:FindFirstChild("TextLabel",true);if (v64 and v64:IsA("TextLabel")) then v64.Text=v11.DisplayText;end v60=3;end if (v60==3) then v21(v63);v63.Parent=v61;v61.Parent=v38;return v61;end if (v60==(701 -(376 + 325))) then v61=Instance.new("BillboardGui");v61.Name=v9   .. "_Billboard" ;v61.AlwaysOnTop=true;v61.LightInfluence=0 -0 ;v60=1;end end end);if ( not v39 or  not v40) then local v69=0 -0 ;while true do if (v69==(0 + 0)) then v18("Не удалось создать наш Billboard/клон!",v40);return false;end end end v13.billboard=v40;v13.clonedFrame=v40:FindFirstChild(v9   .. "_FrameClone" );v17("Наш UI успешно создан.");if (v13.originalGameBillboardGui and v13.originalGameBillboardGui.Parent) then v17("Отключение оригинального игрового BillboardGui...");v13.originalGameBillboardGui.Enabled=false;local v71=v13.originalGameBillboardGui:GetPropertyChangedSignal("Enabled"):Connect(function() if (v13.originalGameBillboardGui and (v13.originalGameBillboardGui.Enabled==true)) then v17("Обнаружено включение оригинального BillboardGui. Принудительно отключаем...");task.wait();if v13.originalGameBillboardGui then v13.originalGameBillboardGui.Enabled=false;end end end);v13.originalBillboardMonitorConn=v71;v17("Мониторинг оригинального BillboardGui запущен.");else v17("Оригинальный игровой BillboardGui не найден/недоступен, пропускаем отключение/мониторинг.");end v13.isInitialized=true;v17("Initialize_Internal SUCCESS");return true;end local function v23(v44) local v45=0;while true do if (v45==1) then if (v13.isEnabled and v44 and v44.Parent) then local v109=0;local v110;while true do if (v109==1) then if v110 then local v137=0 -0 ;while true do if (v137==0) then v17("Установка Adornee на голову: "   .. v110:GetFullName() );v13.billboard.Adornee=v110;v137=15 -(9 + 5) ;end if (v137==(377 -(85 + 291))) then v13.billboard.Enabled=true;break;end end else v18("Не найдена голова для "   .. v44.Name   .. ". Наш UI будет скрыт." );v13.billboard.Adornee=nil;v13.billboard.Enabled=false;end break;end if (v109==(1265 -(243 + 1022))) then v110=v44:FindFirstChild("Head");if  not v110 then local v140=0;while true do if (v140==0) then task.wait(0.1);v110=v44:FindFirstChild("Head");break;end end end v109=3 -2 ;end end else v17("Персонаж отсутствует или скрипт выключен. Скрытие нашего UI.");if v13.billboard then local v128=0 + 0 ;while true do if (v128==0) then v13.billboard.Adornee=nil;v13.billboard.Enabled=false;break;end end end end break;end if (0==v45) then if ( not v13.isInitialized or  not v13.billboard) then return;end v13.character=v44;v45=1181 -(1123 + 57) ;end end end v8.Enable=function(v46) if v13.isEnabled then return;end v17("Команда Enable...");v13.isEnabled=true;if  not v22() then v18("Инициализация не удалась. Enable прервано.");v13.isEnabled=false;return;end if  not v13.connections.CharacterAdded then v13.connections.CharacterAdded=v5.CharacterAdded:Connect(function(v79) v17("Событие CharacterAdded: "   .. v79.Name );v23(v79);end);end if  not v13.connections.CharacterRemoving then v13.connections.CharacterRemoving=v5.CharacterRemoving:Connect(function(v80) v17("Событие CharacterRemoving: "   .. v80.Name );if (v13.character==v80) then v23(nil);end end);end if  not v13.connections.FocusLost then v13.connections.FocusLost=v4.WindowFocusReleased:Connect(function() v13.isWindowFocused=false;v23(v13.character);end);end if  not v13.connections.FocusGained then v13.connections.FocusGained=v4.WindowFocused:Connect(function() v13.isWindowFocused=true;v23(v13.character);end);end v23(v5.Character);v17("Kill Streak Effect Включено.");end;v8.Disable=function(v48) local v49=0 + 0 ;while true do if (v49==(256 -(163 + 91))) then if v13.connections.FocusGained then v13.connections.FocusGained:Disconnect();v13.connections.FocusGained=nil;end if v13.billboard then v13.billboard.Enabled=false;v13.billboard.Adornee=nil;end if (v13.originalBillboardMonitorConn and v13.originalBillboardMonitorConn.Connected) then local v114=1930 -(1869 + 61) ;while true do if (v114==(0 + 0)) then v13.originalBillboardMonitorConn:Disconnect();v17("Мониторинг оригинального BillboardGui остановлен (но оригинал остается выключенным).");break;end end end v49=10 -7 ;end if ((1 -0)==v49) then if v13.connections.CharacterAdded then v13.connections.CharacterAdded:Disconnect();v13.connections.CharacterAdded=nil;end if v13.connections.CharacterRemoving then local v116=0;while true do if (v116==0) then v13.connections.CharacterRemoving:Disconnect();v13.connections.CharacterRemoving=nil;break;end end end if v13.connections.FocusLost then v13.connections.FocusLost:Disconnect();v13.connections.FocusLost=nil;end v49=1 + 1 ;end if (0==v49) then if  not v13.isEnabled then return;end v17("Команда Disable...");v13.isEnabled=false;v49=1 -0 ;end if (v49==(3 + 0)) then v13.originalBillboardMonitorConn=nil;v17("Kill Streak Effect Выключено (UI и оригинал не тронуты, только скрыты/отключены события).");break;end end end;v8.UpdateSetting=function(v50,v51,v52) local v53=0;while true do if (v53==(1474 -(1329 + 145))) then if (v11[v51]==nil) then local v118=971 -(140 + 831) ;while true do if (0==v118) then v18("Попытка обновить неизвестную настройку: "   .. v51 );return;end end end if (v51=="DisplayText") then if (type(v52)=="string") then local v129=1850 -(1409 + 441) ;while true do if (v129==(719 -(15 + 703))) then if (v13.clonedFrame and v13.clonedFrame.Parent) then local v144=0 + 0 ;local v145;while true do if (v144==(438 -(262 + 176))) then v145=v13.clonedFrame:FindFirstChild("TextLabel",true);if (v145 and v145:IsA("TextLabel")) then v145.Text=v11.DisplayText;v17("Текст в активном UI обновлен.");end break;end end end break;end if (v129==(1721 -(345 + 1376))) then v11.DisplayText=v52;v17("Настройка DisplayText обновлена на: '"   .. v52   .. "'" );v129=689 -(198 + 490) ;end end else v18("Неверный тип для DisplayText, ожидалась строка, получен: "   .. type(v52) );end else v18("Попытка изменить нередактируемую настройку: "   .. v51 );end break;end end end;v8.Destroy=function(v54) local v55=0 -0 ;while true do if (v55==(6 -3)) then v0.ExecutorKillStreakEffect=nil;v0.ExecutorKillStreakEffect_Instance=nil;v55=4;end if (v55==(1207 -(696 + 510))) then v13.isEnabled=false;v13.isInitialized=false;v55=3 -1 ;end if (v55==(1264 -(1091 + 171))) then v13.originalKillstreakFrame=nil;v13.originalGameBillboardGui=nil;v55=1 + 2 ;end if (v55==4) then v17("Полностью остановлен и удален.");break;end if (v55==(0 -0)) then v17("Команда Destroy...");v19();v55=3 -2 ;end end end;v0.ExecutorKillStreakEffect_Instance=v8;if  not v5 then local v65=374 -(123 + 251) ;while true do if (v65==(4 -3)) then return;end if (v65==(698 -(208 + 490))) then v18("Не удалось получить LocalPlayer при инициализации скрипта. Destroy().");v8:Destroy();v65=1;end end end

-- Kill Streak
