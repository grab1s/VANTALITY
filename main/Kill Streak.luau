local v0=game:GetService("Players");local v1=game:GetService("Workspace");local v2=game:GetService("RunService");local v3=game:GetService("UserInputService");local v4=v0.LocalPlayer;if  not game:IsLoaded() then game.Loaded:Wait();end task.wait(0.5 -0 );if (_G.ExecutorKillStreakEffect_Instance and (typeof(_G.ExecutorKillStreakEffect_Instance.Destroy)=="function")) then local v56=0 -0 ;while true do if (v56==(0 + 0)) then pcall(_G.ExecutorKillStreakEffect_Instance.Destroy);task.wait(0.1 -0 );break;end end end _G.ExecutorKillStreakEffect_Instance=nil;_G.ExecutorKillStreakEffect=_G.ExecutorKillStreakEffect or {} ;local v5=_G.ExecutorKillStreakEffect;local v6="ExecutorKillStreakEffect_Adapted_v5";v5.Settings=v5.Settings or {DisplayText="2"} ;local v8=v5.Settings;v5.State=v5.State or {isEnabled=false,isInitialized=false,isWindowFocused=true,connections={},billboard=nil,clonedFrame=nil,character=nil,originalKillstreakFrame=nil,originalGameBillboardGui=nil,originalBillboardMonitorConn=nil} ;local v10=v5.State;local v11=0.1;local v12=35 -25 ;local v13=false;local function v14(v25) if v13 then end end local function v15(v26) end local function v16() v14("Cleanup_Internal START");if (v10.originalBillboardMonitorConn and v10.originalBillboardMonitorConn.Connected) then local v73=859 -(814 + 45) ;while true do if (v73==(0 -0)) then v10.originalBillboardMonitorConn:Disconnect();v14("Мониторинг оригинального BillboardGui отключен.");break;end end end v10.originalBillboardMonitorConn=nil;for v57,v58 in pairs(v10.connections) do local v59=0 + 0 ;while true do if (v59==(0 + 0)) then if (v58 and v58.Connected) then v58:Disconnect();end v10.connections[v57]=nil;break;end end end v14("Пользовательские события отключены.");if (v10.billboard and v10.billboard.Parent) then local v74=885 -(261 + 624) ;while true do if (v74==(0 + 0)) then v10.billboard:Destroy();v14("Наш BillboardGui удален.");break;end end end v10.billboard=nil;v10.clonedFrame=nil;if (v10.originalGameBillboardGui and v10.originalGameBillboardGui.Parent) then local v75=0;while true do if ((0 -0)==v75) then v14("Попытка включить оригинальный игровой BillboardGui...");pcall(function() v10.originalGameBillboardGui.Enabled=true;end);break;end end end v10.character=nil;v14("Cleanup_Internal END");end local function v17() local v31=1080 -(1020 + 60) ;local v32;while true do if (v31==(1 + 0)) then v32=pcall(function() local v107=0;local v108;local v109;local v110;while true do if (v107==(203 -(14 + 188))) then v110=v109:WaitForChild("Killstreak",v12);v10.originalKillstreakFrame=v110:WaitForChild("Frame",v12);v107=677 -(534 + 141) ;end if (v107==(1426 -(630 + 793))) then v14("Найден оригинальный Frame: "   .. v10.originalKillstreakFrame:GetFullName() );if (v10.originalGameBillboardGui and v10.originalGameBillboardGui:IsA("BillboardGui")) then v14("Найден оригинальный игровой BillboardGui: "   .. v10.originalGameBillboardGui:GetFullName() );else local v138=0;while true do if (v138==(0 + 0)) then v14("Оригинальный игровой BillboardGui не найден (не критично, но не сможем отключить).");v10.originalGameBillboardGui=nil;break;end end end break;end if (v107==(2 + 0)) then v10.originalGameBillboardGui=v109:FindFirstChild("BillboardGui");if ( not v10.originalKillstreakFrame or  not v10.originalKillstreakFrame:IsA("Frame")) then error("Не найден оригинальный Frame.");end v107=9 -6 ;end if (v107==(0 -0)) then v108=v1:WaitForChild("Cutscenes",v12);v109=v108:WaitForChild("Billboard",v12);v107=1 + 0 ;end end end);if  not v32 then v15("Ошибка при поиске оригинальных UI элементов.");v10.originalKillstreakFrame=nil;v10.originalGameBillboardGui=nil;return false;end v31=6 -4 ;end if (v31==(1749 -(760 + 987))) then return true;end if (v31==(396 -(115 + 281))) then if (v10.originalKillstreakFrame and v10.originalGameBillboardGui) then v14("Оригинальные элементы уже найдены.");return true;end v14("Поиск оригинальных UI элементов...");v31=1914 -(1789 + 124) ;end end end local function v18(v33) local v34=766 -(745 + 21) ;while true do if (v34==(1 + 0)) then if (v33:IsA("ParticleEmitter") or v33:IsA("Beam") or v33:IsA("Trail") or v33:IsA("Light")) then v33.Enabled=true;end for v111,v112 in ipairs(v33:GetChildren()) do v18(v112);end break;end if (v34==(0 -0)) then if  not v33 then return;end if v33:IsA("GuiObject") then v33.Visible=true;end v34=3 -2 ;end end end local function v19() if v10.isInitialized then return true;end if  not v4 then local v76=0 + 0 ;while true do if (v76==(0 + 0)) then v15("LocalPlayer не найден.");return false;end end end local v35=v4:FindFirstChild("PlayerGui");if  not v35 then local v77=1055 -(87 + 968) ;while true do if (v77==(0 -0)) then v15("PlayerGui не найден.");return false;end end end v14("Initialize_Internal START");if  not v17() then local v78=0 + 0 ;while true do if (v78==0) then v15("Не удалось найти оригинальные элементы для инициализации.");return false;end end end local v36,v37=pcall(function() local v60=Instance.new("BillboardGui");v60.Name=v6   .. "_Billboard" ;v60.AlwaysOnTop=true;v60.LightInfluence=0;v60.Enabled=false;v60.ResetOnSpawn=false;local v66=v10.originalKillstreakFrame:FindFirstAncestorWhichIsA("BillboardGui");if v66 then v60.Size=v66.Size;v60.StudsOffset=v66.StudsOffset + (Vector3.yAxis * v11) ;else v60.Size=UDim2.new(4 -0 ,0 -0 ,1415 -(447 + 966) ,1665 -(970 + 695) );v60.StudsOffset=Vector3.new(0 -0 ,v11,1817 -(1703 + 114) );end local v67=v10.originalKillstreakFrame:Clone();v67.Name=v6   .. "_FrameClone" ;local v69=v67:FindFirstChild("TextLabel",true);if (v69 and v69:IsA("TextLabel")) then v69.Text=v8.DisplayText;end v18(v67);v67.Parent=v60;v60.Parent=v35;return v60;end);if ( not v36 or  not v37) then local v79=701 -(376 + 325) ;while true do if (v79==(0 -0)) then v15("Не удалось создать наш Billboard/клон!",v37);return false;end end end v10.billboard=v37;v10.clonedFrame=v37:FindFirstChild(v6   .. "_FrameClone" );v14("Наш UI успешно создан.");if (v10.originalGameBillboardGui and v10.originalGameBillboardGui.Parent) then v14("Отключение оригинального игрового BillboardGui...");v10.originalGameBillboardGui.Enabled=false;local v81=v10.originalGameBillboardGui:GetPropertyChangedSignal("Enabled"):Connect(function() if (v10.originalGameBillboardGui and (v10.originalGameBillboardGui.Enabled==true)) then local v117=0 -0 ;while true do if (v117==(0 -0)) then v14("Обнаружено включение оригинального BillboardGui. Принудительно отключаем...");task.wait();v117=2 -1 ;end if (v117==(1 + 0)) then if v10.originalGameBillboardGui then v10.originalGameBillboardGui.Enabled=false;end break;end end end end);v10.originalBillboardMonitorConn=v81;v14("Мониторинг оригинального BillboardGui запущен.");else v14("Оригинальный игровой BillboardGui не найден/недоступен, пропускаем отключение/мониторинг.");end v10.isInitialized=true;v14("Initialize_Internal SUCCESS");return true;end local function v20(v41) if ( not v10.isInitialized or  not v10.billboard) then return;end v10.character=v41;if (v10.isEnabled and v41 and v41.Parent) then local v83=0;local v84;while true do if (v83==(2 -1)) then if v84 then local v127=780 -(162 + 618) ;while true do if (v127==0) then v14("Установка Adornee на голову: "   .. v84:GetFullName() );v10.billboard.Adornee=v84;v127=15 -(9 + 5) ;end if (v127==(377 -(85 + 291))) then v10.billboard.Enabled=true;break;end end else local v128=0 -0 ;while true do if (v128==1) then v10.billboard.Enabled=false;break;end if (v128==(1265 -(243 + 1022))) then v15("Не найдена голова для "   .. v41.Name   .. ". Наш UI будет скрыт." );v10.billboard.Adornee=nil;v128=1 + 0 ;end end end break;end if (v83==(0 -0)) then v84=v41:FindFirstChild("Head");if  not v84 then local v129=0 + 0 ;while true do if (v129==(1180 -(1123 + 57))) then task.wait(0.1 + 0 );v84=v41:FindFirstChild("Head");break;end end end v83=255 -(163 + 91) ;end end else local v85=0 -0 ;while true do if (0==v85) then v14("Персонаж отсутствует или скрипт выключен. Скрытие нашего UI.");if v10.billboard then local v130=0 -0 ;while true do if (v130==0) then v10.billboard.Adornee=nil;v10.billboard.Enabled=false;break;end end end break;end end end end v5.Enable=function(v43) if v10.isEnabled then return;end v14("Команда Enable...");v10.isEnabled=true;if  not v19() then v15("Инициализация не удалась. Enable прервано.");v10.isEnabled=false;return;end if  not v10.connections.CharacterAdded then v10.connections.CharacterAdded=v4.CharacterAdded:Connect(function(v98) local v99=1930 -(1869 + 61) ;while true do if (0==v99) then v14("Событие CharacterAdded: "   .. v98.Name );v20(v98);break;end end end);end if  not v10.connections.CharacterRemoving then v10.connections.CharacterRemoving=v4.CharacterRemoving:Connect(function(v100) local v101=0 + 0 ;while true do if (v101==0) then v14("Событие CharacterRemoving: "   .. v100.Name );if (v10.character==v100) then v20(nil);end break;end end end);end if  not v10.connections.FocusLost then v10.connections.FocusLost=v3.WindowFocusReleased:Connect(function() v10.isWindowFocused=false;v20(v10.character);end);end if  not v10.connections.FocusGained then v10.connections.FocusGained=v3.WindowFocused:Connect(function() local v103=0;while true do if (v103==(0 -0)) then v10.isWindowFocused=true;v20(v10.character);break;end end end);end v20(v4.Character);v14("Kill Streak Effect Включено.");end;v5.Disable=function(v45) local v46=0 -0 ;while true do if (v46==(1583 -(1535 + 46))) then if v10.connections.FocusGained then local v118=0 -0 ;while true do if (v118==(0 + 0)) then v10.connections.FocusGained:Disconnect();v10.connections.FocusGained=nil;break;end end end if v10.billboard then local v119=0;while true do if (v119==(0 + 0)) then v10.billboard.Enabled=false;v10.billboard.Adornee=nil;break;end end end if (v10.originalBillboardMonitorConn and v10.originalBillboardMonitorConn.Connected) then v10.originalBillboardMonitorConn:Disconnect();v14("Мониторинг оригинального BillboardGui остановлен (но оригинал остается выключенным).");end v46=3 -0 ;end if (v46==(0 -0)) then if  not v10.isEnabled then return;end v14("Команда Disable...");v10.isEnabled=false;v46=1468 -(899 + 568) ;end if ((3 + 0)==v46) then v10.originalBillboardMonitorConn=nil;v14("Kill Streak Effect Выключено (UI и оригинал не тронуты, только скрыты/отключены события).");break;end if (v46==(1475 -(1329 + 145))) then if v10.connections.CharacterAdded then local v120=0 -0 ;while true do if (v120==0) then v10.connections.CharacterAdded:Disconnect();v10.connections.CharacterAdded=nil;break;end end end if v10.connections.CharacterRemoving then local v121=971 -(140 + 831) ;while true do if ((1850 -(1409 + 441))==v121) then v10.connections.CharacterRemoving:Disconnect();v10.connections.CharacterRemoving=nil;break;end end end if v10.connections.FocusLost then local v122=718 -(15 + 703) ;while true do if (v122==(290 -(60 + 230))) then v10.connections.FocusLost:Disconnect();v10.connections.FocusLost=nil;break;end end end v46=2;end end end;v5.UpdateSetting=function(v47,v48,v49) local v50=572 -(426 + 146) ;while true do if (v50==(0 + 0)) then if (v8[v48]==nil) then v15("Попытка обновить неизвестную настройку: "   .. v48 );return;end if (v48=="DisplayText") then if (type(v49)=="string") then local v131=438 -(262 + 176) ;while true do if (v131==(1 + 0)) then if (v10.clonedFrame and v10.clonedFrame.Parent) then local v148=1721 -(345 + 1376) ;local v149;while true do if (v148==0) then v149=v10.clonedFrame:FindFirstChild("TextLabel",true);if (v149 and v149:IsA("TextLabel")) then v149.Text=v8.DisplayText;v14("Текст в активном UI обновлен.");end break;end end end break;end if (v131==(688 -(198 + 490))) then v8.DisplayText=v49;v14("Настройка DisplayText обновлена на: '"   .. v49   .. "'" );v131=4 -3 ;end end else v15("Неверный тип для DisplayText, ожидалась строка, получен: "   .. type(v49) );end else v15("Попытка изменить нередактируемую настройку: "   .. v48 );end break;end end end;v5.Destroy=function(v51) v14("Команда Destroy...");v16();v10.isEnabled=false;v10.isInitialized=false;v10.originalKillstreakFrame=nil;v10.originalGameBillboardGui=nil;_G.ExecutorKillStreakEffect=nil;_G.ExecutorKillStreakEffect_Instance=nil;v14("Полностью остановлен и удален.");end;_G.ExecutorKillStreakEffect_Instance=v5;if  not v4 then local v72=0;while true do if (v72==(0 -0)) then v15("Не удалось получить LocalPlayer при инициализации скрипта. Destroy().");v5:Destroy();v72=1207 -(696 + 510) ;end if (v72==(1 + 0)) then return;end end end
